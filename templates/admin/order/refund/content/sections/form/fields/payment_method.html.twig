{% set order = hookable_metadata.context.order %}
{% set completed = constant('Sylius\\Component\\Core\\Model\\PaymentInterface::STATE_COMPLETED') %}
{% set payment_methods = hookable_metadata.context.payment_methods %}
{% set original_payment_method = order.lastPayment(completed).method %}

<div class="col-12 col-md-6">
    <div class="field">
        <label for="payment-methods" class="form-label">{{ 'sylius.ui.payment_method'|trans }}</label>
        <select id="payment-methods" name="sylius_refund_payment_method" class="form-select mb-1">
            {% for payment_method in payment_methods %}
                <option value="{{ payment_method.id }}" {{ (payment_method.code == original_payment_method.code) ? 'selected="selected"' : '' }}>
                    {{ payment_method.name }}
                </option>
            {% endfor %}
        </select>
        <small id="original-payment-method">{{ 'sylius.ui.original_payment_method'|trans }}: <strong>{{ original_payment_method }}</strong></small>
    </div>
</div>
