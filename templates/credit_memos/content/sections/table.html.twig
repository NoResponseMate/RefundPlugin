{% set credit_memo = hookable_metadata.context.credit_memo %}

<div class="col-12">
    <div class="card">
        <table class="table mb-0">
            <thead>
            <tr>
                <th>{{ 'sylius_refund.ui.no'|trans }}</th>
                <th>{{ 'sylius.ui.name'|trans }}</th>
                <th>{{ 'sylius.ui.quantity'|trans }}</th>
                <th>{{ 'sylius_refund.ui.unit_net_price'|trans }}</th>
                <th>{{ 'sylius_refund.ui.net_value'|trans }}</th>
                <th>{{ 'sylius_refund.ui.tax_rate'|trans }}</th>
                <th>{{ 'sylius_refund.ui.tax_amount'|trans }}</th>
                <th>{{ 'sylius_refund.ui.gross_value'|trans }}</th>
                <th>{{ 'sylius.ui.currency'|trans }}</th>
            </tr>
            </thead>
            <tbody>
                {% for item in credit_memo.lineItems %}
                    <tr>
                        <td>
                            {{ loop.index }}
                        </td>
                        <td>
                            {{ item.name }}
                        </td>
                        <td>
                            {{ item.quantity }}
                        </td>
                        <td>
                            {{ '%0.2f'|format(item.unitNetPrice/100) }}
                        </td>
                        <td>
                            {{ '%0.2f'|format(item.netValue/100) }}
                        </td>
                        <td>
                            {{ item.taxRate }}
                        </td>
                        <td>
                            {{ '%0.2f'|format(item.taxAmount/100) }}
                        </td>
                        <td>
                            {{ '%0.2f'|format(item.grossValue/100) }}
                        </td>
                        <td>
                            {{ credit_memo.currencyCode }}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3" class="text-end">
                        <strong>{{ 'sylius_refund.ui.net_total'|trans }}</strong>:
                    </td>
                    <td id="credit-memo-net-value-total">
                        {{ '%0.2f'|format(credit_memo.getNetValueTotal()/100) }}
                    </td>
                    <td colspan="1" class="text-end">
                        <strong>{{ 'sylius_refund.ui.tax_total'|trans }}</strong>:
                    </td>
                    <td id="credit-memo-tax-total">
                        {{ '%0.2f'|format(credit_memo.getTaxTotal()/100) }}
                    </td>
                    <td colspan="1" class="text-end">
                        <strong>{{ 'sylius.ui.total'|trans }}</strong>:
                    </td>
                    <td id="credit-memo-total">
                        {{ '%0.2f'|format(credit_memo.total/100) }}
                    </td>
                    <td id="credit-memo-total-currency-code">
                        {{ credit_memo.currencyCode }}
                    </td>
                </tr>
                <tr>
                    <th colspan="7" class="text-end">
                        <strong>{{ 'sylius_refund.ui.tax_rate'|trans }}</strong>
                    </th>
                    <th>
                        <strong>{{ 'sylius_refund.ui.tax_amount'|trans }}</strong>
                    </th>
                    <th>
                        <strong>{{ 'sylius.ui.currency'|trans }}</strong>
                    </th>
                </tr>
                {% for item in credit_memo.taxItems %}
                    <tr class="tax-item">
                        <td colspan="7" class="text-end">
                            {{ item.label }}:
                        </td>
                        <td class="tax-item-amount">
                            {{ '%0.2f'|format(item.amount/100) }}
                        </td>
                        <td class="tax-item-currency-code">
                            {{ credit_memo.currencyCode }}
                        </td>
                    </tr>
                {% endfor %}
            </tfoot>
        </table>

        {% if credit_memo.comment != '' %}
            <div class="card-body">
                <h3 class="mb-1">{{ 'sylius.ui.comment'|trans }}</h3>
                <p id="credit-memo-comment">{{ credit_memo.comment }}</p>
            </div>
        {% endif %}
    </div>
</div>
